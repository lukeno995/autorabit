<apex:page standardController="Case" extensions="PO_RegistrationController" docType="html-5.0" applyhtmltag="false" showheader="false" sidebar="false" standardstylesheets="false" id="pgId">
    <html lang="en">
    
                <head>
                <script type="text/javascript">
                var datefield=document.createElement("input")
                datefield.setAttribute("type", "date")
                if (datefield.type!="date"){ //if browser doesn't support input type="date", load files for jQuery UI Date Picker
	                document.write('<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />\n')
	                document.write('<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"><\/script>\n')
	                document.write('<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"><\/script>\n') 
	                jQuery(function($){ //on document.ready
	                	$('#date4').datepicker({dateFormat: 'dd/mm/yy'});
	                   
	                })
                }
                </script>
                </head>
    
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>        
            <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
            <meta name="viewport" content="width=device-width, initial-scale=1"/>
            <title>Open Fiber</title>  
            <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" /> 
            <!-- Bootstrap Core CSS -->
            <apex:stylesheet value="{!URLFOR($Resource.ENELfiles, 'ENELfiles/EnelStylesheets/files/vendor/bootstrap/css/bootstrap.min.css')}"/>
            
            <!-- MetisMenu CSS -->
            <apex:stylesheet value="{!URLFOR($Resource.ENELfiles, 'ENELfiles/EnelStylesheets/files/vendor/metisMenu/metisMenu.min.css')}"/>
            
            <!-- Custom CSS -->
            <apex:stylesheet value="{!URLFOR($Resource.ENELfiles, 'ENELfiles/EnelStylesheets/files/dist/css/sbadmin2.css')}"/>
            
            <!-- Morris Charts CSS -->
            <apex:stylesheet value="{!URLFOR($Resource.ENELfiles, 'ENELfiles/EnelStylesheets/files/vendor/morrisjs/morris.css')}"/>
            
            <!-- Custom Fonts -->
            <apex:stylesheet value="{!URLFOR($Resource.ENELfiles, 'ENELfiles/EnelStylesheets/files/vendor/fontawesome/css/fontawesome.min.css')}"/>
            
            <style>
                .navbar {
                min-height: 105px;
                }
                .navbar-header {
                float: none;
                }
                .navbar-default {
                background-color: #ffffff;
                }
                .panel-default>.panel-heading {
                color: #ffffff;
                background-color: #337ab7;
                }
                span.dateFormat{
                
                display:none;
                
                }
                .red{color:red;}
                .form-check-input{ 
                margin-left: 45px !important;
                margin-top: 10px;
                }
                
            </style>
        </head>
        <body>
           
            <div id="wrapper">
                <!-- Navigation -->
                <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
                    <!--<c:POHeaderComp />-->
                    <c:PO_SideBarComponent Rec="{!recordOfferta}" />
                    
                    <div class="navbar-default sidebar" role="navigation">
                        <div class="sidebar-nav navbar-collapse">
                            <ul class="nav" id="side-menu">
                            </ul>
                        </div>
                        <!-- /.sidebar-collapse -->
                    </div>
                    <!-- /.navbar-static-side -->
                </nav>
                
                <div id="page-wrapper">
                    <div class="row">
                        <div>
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <i></i>Dati Ordine
                                </div>
                                <div class="panel-body">
                                    <div class="row">
                                        
                                        <div style="color:red;" id="showerror">
                                            <apex:pageMessages id="errors" /> 
                                        </div>
                                        
                                        
                                        <apex:form styleClass="form-horizontal" id="frmId">  
                                        <!--<form>-->
                                        <div style="color:red;" id="showerror">
                                                <apex:pageMessages id="errors" /> 
                                                
                                         </div>
                                            <div class="container">
                                             
                                                    <apex:outputPanel id="panelid" >
                                            
                                                    <div class="form-group">
                                                        <label class="control-label col-sm-3" for="date4">Data Attivazione Richiesta Cliente</label>
                                                        <div class="col-sm-6">
                                                           <!--<apex:input type="date"  value="{!childrecdate}" size="10" id="date4"  onfocus="DatePicker.pickDate(false, 'myPage:myForm:demo', false);"  />-->
                                                           <input type="date" id="date4" value="{!ordercasedit.PO_Data_Attivazione_Richiesta__c}" />
                                                            <apex:inputHidden id="hdnRep2" value="{!date4}"/>  
                                                         
                                                          
                                                                                                                   </div>
                                                    </div>
                                                    
                                                    
                                                    <div class="form-group">
                                                        <label class="control-label col-sm-3" for="PMRiferimento">PM Riferimento</label>
                                                        <div class="col-sm-6">
                                                            <apex:inputfield value="{!ordercasedit.PO_Nome_E_Cognome_PM__c}" id="PMRiferimento" />
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label col-sm-3" for="Telefono">Telefono PM</label>
                                                        <div class="col-sm-6">
                                                            <apex:inputfield value="{!ordercasedit.PO_Numero_Telefonico_PM__c}" id="Telefono" />
                                                        </div>
                                                    </div>
                                                    
                                            </apex:outputPanel>
                                                <br/><br/><br/>
                                                <div class="form-group">
                                                    <div class="col-lg-6 col-offset-6">
                                                    </div>
                                                    <div class="col-lg-6 col-offset-6">
                                                        <apex:commandButton styleClass="btn btn-primary" value="Annulla" style="margin-right:10px;" action="{!orderAnnula}" /> 
     
                                                          <apex:commandButton styleClass="btn btn-primary" value="Salva" style="margin-right:10px;"  onclick="validateform();" reRender="errors"/> 
                                               
                                                    </div>
                                                    <div class="col-lg-6 col-offset-6">
                                                       
                                                                                                   
                                                    </div>
                                                    
                                                </div>
                                                 
                                            </div>
                                           <!--</form>-->
                                                   
                                                    <apex:actionFunction action="{!SaveOrderCase}" name="SaveOrderCasemethod" /   >
                                                      <!--<apex:param name="datevalue1" assignTo="{!childrecdate}" value="" />-->
                                              
                                        </apex:form>    
                                        
                                        <br/>
                                    </div>
                                    <!-- /.row (nested) -->
                                </div>
                                <!-- /.panel-body -->
                            </div>       
                            <!-- /.col-lg-4 -->
                        </div>
                        <!-- /.row -->
                    </div>
                    <!-- /#page-wrapper -->
                    
                </div>
            </div>
            <!-- /#wrapper -->
            
            <apex:includeScript value="{!URLFOR($Resource.ENELfiles, 'ENELfiles/EnelStylesheets/files/vendor/jquery/jquery.min.js')}"/>
            
            <!-- Bootstrap Core JavaScript -->
            <apex:includeScript value="{!URLFOR($Resource.ENELfiles, 'ENELfiles/EnelStylesheets/files/vendor/bootstrap/js/bootstrap.min.js')}"/>
            <script src='https://www.google.com/recaptcha/api.js'></script>
             <script>
             j$ = jQuery.noConflict();   
             
                     $( function() {
                $( "#date4" ).datepicker();
              } ); 
             
                
		function checkvaliddateformat() {  
            var DateToCheck = j$('[id$=date4]').val();  
            console.log(DateToCheck);
            
            
            
            if(DateToCheck.includes('-')){
            var dob = DateToCheck.split('-');
			var yy = dob[0];  
            var mm = dob[1];  
            var dd = dob[2];
            
            console.log('nel primo if');            
            }
            else if(DateToCheck.includes('/')){
            var dob = DateToCheck.split('/');
			var yy = dob[2];  
            var mm = dob[1];  
            var dd = dob[0];
            
            console.log('nel secondo if');                     
            }  
              
  			var invalidflg = false;
  			
  			console.log(yy);
  			console.log(mm);
  			console.log(dd);
  			
            if (dd == '' || mm == '' || yy == '' || isNaN(dd) || isNaN(mm) || isNaN(yy) || dd == 0 || mm == 0 || yy == 0) {  
	            j$('[id$=date4]').next('div.red').remove();
                   j$('[id$=date4]').after('<div class="red">Campo obbligatorio</div>');
                   return false;
            }  
            else{
                    j$('[id$=date4]').next('div.red').remove();
                    
                   
                }
  
                if (dob.length != 3) {  
	                j$('[id$=date4]').next('div.red').remove();
                    j$('[id$=date4]').after('<div class="red">Attenzione: inserire la data in formato gg/mm/aaaa</div>');
                   	return false;
                }  
                else{
                    j$('[id$=date4]').next('div.red').remove();
                }
                if ((mm == 04 || mm == 06 || mm == 09 || mm == 11) && dd > 30) {  
              j$('[id$=date4]').next('div.red').remove();
                 j$('[id$=date4]').after('<div class="red">Attenzione: inserire una giorno del mese minore o uguale a 30</div>');
               		return false;
                } 
                else{
                    j$('[id$=date4]').next('div.red').remove();
                } 
                if ((mm == 01 || mm == 03 || mm == 05 || mm == 07 || mm == 08 || mm == 10 || mm == 12) && dd > 31) {  
              j$('[id$=date4]').next('div.red').remove();
                 j$('[id$=date4]').after('<div class="red">Attenzione: inserire una giorno del mese minore o uguale a 31</div>');
               		return false;
             }    
             else{
                    j$('[id$=date4]').next('div.red').remove();
                }		                      
                if (mm == 02) {  
                    var lyear = false;  
                    if ((!(yy % 4) && yy % 100) || !(yy % 400)) {  
                        lyear = true;  
                    }  
                    if ((lyear == false) && (dd >= 29)) {  

               			j$('[id$=date4]').next('div.red').remove();
                  		j$('[id$=date4]').after('<div class="red">Attenzione: la data inserita non è valida per il mese di Febbraio</div>');
               			return false;
                          
                    }
                    else{
	                    j$('[id$=date4]').next('div.red').remove();
	                }  
                    if ((lyear == true) && (dd > 29)) {  
		               j$('[id$=date4]').next('div.red').remove();
		                  j$('[id$=date4]').after('<div class="red">Attenzione: la data inserita non è valida per il mese di Febbraio</div>');
               			return false;
                    }  
                    else{
	                    j$('[id$=date4]').next('div.red').remove();
	                }
                }  
                if (parseFloat(mm) > 12) {  
               j$('[id$=date4]').next('div.red').remove();
                  j$('[id$=date4]').after('<div class="red">Attenzione: il mese inserito non è corretto</div>');
               			return false;
                }
                else{
                    j$('[id$=date4]').next('div.red').remove();
                }  
                if (yy.length != 4) {  
               		j$('[id$=date4]').next('div.red').remove();
                  j$('[id$=date4]').after('<div class="red">Attenzione: inserire l\'anno in formato yyyy</div>');
               			return false;
                }
                else{
                    j$('[id$=date4]').next('div.red').remove();
                }
                
                return true;  
           
           }               
             
            function validateform(){
            
                    var hiddenRep = document.getElementById('pgId:frmId:hdnRep2');
                      hiddenRep.value = document.getElementById('date4').value;
                      
                    var invalidflg = false;
                    var PMRiferimento = j$('[id$=PMRiferimento]').val();
                   var Telefono = j$('[id$=Telefono]').val();
                   var date4= j$('[id$=date4]').val();
                  
                   var checkdateinscript = '{!stringdate_In_PO_ModalController}';
             /* if( date4.length == 0 || date4<checkdateinscript){
                    
                    j$('[id$=date4]').next('div.red').remove();
                    j$('[id$=date4]').after('<div class="red">Campo obbligatorio</div>');
                    invalidflg = true;
                    //return true;
                       
                }else{
                    j$('[id$=date4]').next('div.red').remove();
                    
                   
                }  */
                   
                   
                   
                    if(PMRiferimento.length == 0){
                    j$('[id$=PMRiferimento]').next('div.red').remove();
                    j$('[id$=PMRiferimento]').after('<div class="red">Campo obbligatorio</div>');
                    invalidflg = true;
                }else{
                    j$('[id$=PMRiferimento]').next('div.red').remove();
                }
                if(Telefono.length == 0){
                    j$('[id$=Telefono]').next('div.red').remove();
                    j$('[id$=Telefono]').after('<div class="red">Campo obbligatorio</div>');
                    invalidflg = true;
                }else{
                    j$('[id$=Telefono]').next('div.red').remove();
                }
                
                checkvaliddateformat();
                console.log(checkvaliddateformat());
                console.log(invalidflg);
                
                if(!checkvaliddateformat()){
                	return false;
                }
                  if(invalidflg){
                    return false;
                }
                  
                  SaveOrderCasemethod();
                }
           </script> 
            </body>
            </html>
            </apex:page>