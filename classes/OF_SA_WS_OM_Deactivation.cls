//Generated by wsdl2apex

public class OF_SA_WS_OM_Deactivation {
    public class DisattivazioneOrdinePortTypeEndpoint {
        List<OF_Puntamento_Callout__c> listCustomSett =  OF_Puntamento_Callout__c.getAll().values();
    	String puntamento=listCustomSett[0].OF_OGW__c;
        public String endpoint_x = 'https://'+puntamento+'.ENEL.COM:44300/OrderManagement/RequestServiziAttivi/GW_DeactivationOrder';
        //public String endpoint_x = 'https://requestb.in/146r43w1';
        public Map<String,String> inputHttpHeaders_x;
        public Map<String,String> outputHttpHeaders_x;
        public String clientCertName_x;
        public String clientCert_x;
        public String clientCertPasswd_x;
        public Integer timeout_x;
        private String[] ns_map_type_info = new String[]{'http://xmlns.enel.it/OLO_Gatway/wsdl/concrete/OrderManagement/ServiziAttivi/DisattivazioneOrdine', 'OF_SA_WS_OM_Deactivation', 'http://enel.it/schemas/class/ServiziAttivi/Esito', 'OF_SA_WS_OM_Response', 'http://enel.it/schemas/class/ServiziAttivi/OrderManagement/DisattivazioneOrdine', 'OF_SA_WS_OM_Classi'};
        public OF_SA_WS_OM_Response.Esito_element DeactivationOrderOM(List<EOF_EAI_Service_Log__c> sList) {
            OF_SA_WS_OM_Classi.Disattivazione_element request_x = new OF_SA_WS_OM_Classi.Disattivazione_element();
            EOF_EAI_Service_Log__c slToUpdate = new EOF_EAI_Service_Log__c();
            for(EOF_EAI_Service_Log__c sl :sList){  
            	if(sl.recordtypeId==OF_SA_GE_Utils.rtMap.get('OF_SA_FiberRequest')){
            		slToUpdate = sl;
		            request_x.CODICE_OPERATORE=sl.EOF_CODICE_OPERATORE__c;
					request_x.CODICE_ORDINE_OLO=sl.EOF_CODICE_ORDINE_OLO__c;
					request_x.CODICE_ORDINE_OF=sl.EOF_CODICE_ORDINE_EOF__c;
					request_x.DATA_NOTIFICA=OF_SA_GE_Utils.DateToString(sl.EOF_DATA_NOTIFICA__c);
					request_x.ID_NOTIFICA=sl.EOF_ID_NOTIFICA__c;
					request_x.CODICE_MOTIVAZIONE=sl.EOF_CODICE_MOTIVAZIONE__c;
					request_x.MOTIVAZIONE=sl.EOF_MOTIVAZIONE__c;
					request_x.GPON_ATTESTAZIONE=sl.EOF_GPON_Attestazione__c;
					request_x.NOME_CLIENTE=sl.EOF_NOME_CLIENTE__c;
					request_x.COGNOME_CLIENTE=sl.EOF_COGNOME_CLIENTE__c;
					request_x.RECAPITO_TELEFONICO_CLIENTE_1=sl.EOF_RECAPITO_TELEFONICO_CLIENTE_1__c;
					request_x.RECAPITO_TELEFONICO_CLIENTE_2=sl.EOF_RECAPITO_TELEFONICO_CLIENTE_2__c;
					request_x.NOTE=sl.EOF_NOTE__c;
				 	request_x.ID_RISORSA=sl.EOF_ID_RISORSA__c ;
				 	request_x.TIPO_COMUNICAZIONE=sl.EOF_TIPO_COMUNICAZIONE__c ;
				 	request_x.SORGENTE=sl.EOF_SORGENTE__c ;
					request_x.SLA_DATE=sl.EOF_SLA_DATE__c ; 
				 	request_x.GPON_Vincolante=sl.EOF_GPON_VINCOLANTE__c ;
			 		request_x.Opzione_System_Unico=sl.EOF_OPZIONE_SYSTEM_UNICO__c ;
				 	request_x.Collegamento_P2P=sl.EOF_COLLEGAMENTO_P2P__c ;
				 	request_x.TRACCIATO=sl.EOF_TRACCIATO__c ;
				 	request_x.ID_SERVIZIO=sl.EOF_ID_SERVIZIO__c ;
				 	request_x.PROFILO=sl.EOF_PROFILO__c ;
				 	request_x.Provincia=sl.EOF_Provincia__c ;
				 	request_x.Comune=sl.EOF_Comune__c;
				 	//request_x.Particella_Toponomastica=sl.EOF_Particella_Toponomastica__c ;
					request_x.Indirizzo=sl.EOF_Indirizzo__c ; 
				 	request_x.Numero_Civico=sl.EOF_Numero_Civico__c ; 
            	}
            }
            if(sList.size()>1){
	        	request_x.APPARATO = new List<OF_SA_WS_OM_Classi.DISATTIVAZIONE_APPARATO_element>();
	        	
	        	for(EOF_EAI_Service_Log__C sLog : sList){
	        		
	        		if(sLog.recordtypeId==OF_SA_GE_Utils.rtMap.get('OF_SA_Cpe')){
	        			OF_SA_WS_OM_Classi.DISATTIVAZIONE_APPARATO_element app = new OF_SA_WS_OM_Classi.DISATTIVAZIONE_APPARATO_element();
		        		app.TIPOLOGIA_APPARATO=sLog.EOF_TIPOLOGIA_APPARATO__C;
			        	app.ID_APPARATO=sLog.OF_SA_ID_APPARATO__c;
		        		request_x.APPARATO.add(app); 
	        		}
		        } 
            }
            OF_SA_WS_OM_Response.Esito_element response_x;
            Map<String, OF_SA_WS_OM_Response.Esito_element> response_map_x = new Map<String, OF_SA_WS_OM_Response.Esito_element>();
            response_map_x.put('response_x', response_x);
            WebServiceCallout.invoke(
              this,
              request_x,
              response_map_x,
              new String[]{endpoint_x,
              'DeactivationOrderOM',
              'http://enel.it/schemas/class/ServiziAttivi/OrderManagement/DisattivazioneOrdine',
              'Disattivazione',
              'http://enel.it/schemas/class/ServiziAttivi/Esito',
              'Esito',
              'OF_SA_WS_OM_Response.Esito_element'}
            );
            response_x = response_map_x.get('response_x');
            
            OF_SA_GE_Utils.slSFOM.EOF_Richiesta_Notifica__c = OF_SA_GE_Utils.copy_request(request_x);
            //update slToUpdate;
            if(OF_SA_GE_Utils.testNackTecnicoOM){
            	 OF_SA_WS_OM_Response.Esito_element resp = (OF_SA_WS_OM_Response.Esito_element) OF_SA_GE_Utils.simulateNACK('OLO');
            	return resp;
            }
            return response_x;
        }
    }
}