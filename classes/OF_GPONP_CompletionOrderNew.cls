//Generated by wsdl2apex

public class OF_GPONP_CompletionOrderNew {
    public class PortTypeEndpoint6 {
        List<OF_Puntamento_Callout__c> listCustomSett =  OF_Puntamento_Callout__c.getAll().values();
    	String puntamento=listCustomSett[0].Tibco_Collaudo__c;
        public String endpoint_x = 'https://'+puntamento+'/New_SF_OLO/CompletionOrder_GPONP';
        //public String endpoint_x = 'http://localhost:7080/New_SF_OLO/CompletionOrder_GPONP';
        public Map<String,String> inputHttpHeaders_x;
        public Map<String,String> outputHttpHeaders_x;
        public String clientCertName_x;
        public String clientCert_x;
        public String clientCertPasswd_x; 
        public Integer timeout_x;
        private String[] ns_map_type_info = new String[]{'http://openfiber.it/schemas/OLO_Gateway_SKY/SharedResources/CommonSchema/New_SF_OLO_Passivi/OF_CompletionOrder_GPONP.xsd', 'OF_GPONP_Req_Schema_CompletionOrderNew', 'http://openfiber.it/schemas/New_SF_OLO_Passivi/Response.xsd', 'OF_GPONP_Res_Schema_CompletionOrderNew', 'http://xmlns.example.com/1542282658706', 'OF_GPONP_CompletionOrderNew'};
        public OF_GPONP_Res_Schema_CompletionOrderNew.Response_element CompletionOrder_GPONP(List<EOF_EAI_Service_Log__c> sList) {
            OF_GPONP_Req_Schema_CompletionOrderNew.OF_CompletionOrder_GPONP_element request_x = new OF_GPONP_Req_Schema_CompletionOrderNew.OF_CompletionOrder_GPONP_element();
            request_x.request = new OF_GPONP_Req_Schema_CompletionOrderNew.OF_CompletionOrder_GPONP_Request();

            for(EOF_EAI_Service_Log__c sl : sList){  
                    if(sl.EOF_Tipo_Comunicazione_String__c == 'SF-OLO - CompletionOrder'){
                        request_x.request.CODICE_OPERATORE = sl.EOF_CODICE_OPERATORE__C; 
                        request_x.request.CODICE_ORDINE_OLO = sl.EOF_CODICE_ORDINE_OLO__C;
                        request_x.request.CODICE_ORDINE_OF = sl.EOF_CODICE_ORDINE_EOF__C; 
                        request_x.request.DATA_NOTIFICA = OF_SA_GE_Utils.DateToString(sl.EOF_DATA_NOTIFICA__C);
                        request_x.request.ID_NOTIFICA = sl.EOF_ID_NOTIFICA__C;
                        request_x.request.STATO_ORDINE = sl.EOF_STATO_ORDINE__C;
                        request_x.request.CODICE_MOTIVAZIONE = sl.EOF_CODICE_MOTIVAZIONE__C;
                        request_x.request.MOTIVAZIONE = sl.EOF_MOTIVAZIONE__C;
                        request_x.request.ID_RISORSA = sl.EOF_ID_RISORSA__C;
                        if(sl.EOF_DATA_ESPLETAMENTO_ORDINE__C != null){
                            request_x.request.DATA_ESPLETAMENTO_ORDINE = OF_SA_GE_Utils.DateToStringNoTime(sl.EOF_DATA_ESPLETAMENTO_ORDINE__C);
                        }
                        request_x.request.PARAMETRI_TRASMISSIVI_OTTICI = sl.EOF_Parametri_Trasmissivi_Ottici__c;
                        request_x.request.DDT = sl.OF_SA_DDT__C;
                        request_x.request.NOTE = sl.EOF_NOTE__C;
                        request_x.request.ID_SPLITTER_SECONDARIO = sl.EOF_ID_Splitter_Secondario__c;
                        request_x.request.POSIZIONE_SPLITTER_SECONDARIO = sl.EOF_Posizione_Splitter_Secondario__c;
                        request_x.request.GPON_DI_ATTESTAZIONE = sl.EOF_GPON_Attestazione__c;
                    }
            }
            if(sList.size()>1){
                request_x.request.SERVIZIO_AGGIUNTIVO = new OF_GPONP_Req_Schema_CompletionOrderNew.ArrayOf_tns2_ServizioAggiuntivoOF_CompletionOrder_GPONP();
                request_x.request.APPARATO = new OF_GPONP_Req_Schema_CompletionOrderNew.ArrayOf_tns1_ApparatoOF_CompletionOrder_GPONP();

                request_x.request.SERVIZIO_AGGIUNTIVO.item = new List<OF_GPONP_Req_Schema_CompletionOrderNew.ServizioAggiuntivoOF_CompletionOrder_GPONP>();
                request_x.request.APPARATO.item = new List<OF_GPONP_Req_Schema_CompletionOrderNew.ApparatoOF_CompletionOrder_GPONP>();
                for(EOF_EAI_Service_Log__C sLog : sList){
                    
                    if(sLog.EOF_Tipo_COmunicazione_String__c=='CPE'){ //controllare se lo passiamo, in caso
                        OF_GPONP_Req_Schema_CompletionOrderNew.ApparatoOF_CompletionOrder_GPONP app = new OF_GPONP_Req_Schema_CompletionOrderNew.ApparatoOF_CompletionOrder_GPONP();
                        app.TIPOLOGIA_APPARATO=sLog.EOF_TIPOLOGIA_APPARATO__C;
                        app.ESITO_CONSEGNA_APPARATO=sLog.EOF_ESITO_CONSEGNA_APPARATO__c;
                        app.ID_APPARATO_CONSEGNATO=sLog.OF_SA_ID_APPARATO_CONSEGNATO__c;
                        app.CODICE_MOTIVAZIONE_CONSEGNA=sLog.OF_SA_CODICE_MOTIVAZIONE_CONSEGNA__c;
                        app.MOTIVAZIONE_CONSEGNA=sLog.OF_SA_MOTIVAZIONE_CONSEGNA__c;
                        request_x.request.APPARATO.item.add(app); 
                    }
                    
                    if(sLog.EOF_Tipo_COmunicazione_String__c=='SERVIZIO AGGIUNTIVO'){
                        OF_GPONP_Req_Schema_CompletionOrderNew.ServizioAggiuntivoOF_CompletionOrder_GPONP sa = new OF_GPONP_Req_Schema_CompletionOrderNew.ServizioAggiuntivoOF_CompletionOrder_GPONP();
                        sa.NOME_SERVIZIO=sLog.OF_SA_NOME_SERVIZIO__c; 
                        sa.ESITO_SERVIZIO=sLog.OF_SA_ESITO_SERVIZIO__c;
                        sa.CODICE_MOTIVAZIONE_SERVIZIO=sLog.OF_SA_CODICE_MOTIVAZIONE_SERVIZIO__c; 
                        sa.MOTIVAZIONE_SERVIZIO=sLog.OF_SA_MOTIVAZIONE_SERVIZIO__c;
                        request_x.request.SERVIZIO_AGGIUNTIVO.item.add(sa); 
                    } 
                    
                } 
            }

            OF_GPONP_Res_Schema_CompletionOrderNew.Response_element response_x;
            Map<String, OF_GPONP_Res_Schema_CompletionOrderNew.Response_element> response_map_x = new Map<String, OF_GPONP_Res_Schema_CompletionOrderNew.Response_element>();
            response_map_x.put('response_x', response_x);
            WebServiceCallout.invoke(
              this,
              request_x,
              response_map_x,
              new String[]{endpoint_x,
              '/Business/Services/New_SF_OLO/Resources/OF_CompletionOrder_GPONP-service6.serviceagent/PortTypeEndpoint6/CompletionOrder_GPONP',
              'http://openfiber.it/schemas/OLO_Gateway_SKY/SharedResources/CommonSchema/New_SF_OLO_Passivi/OF_CompletionOrder_GPONP.xsd',
              'OF_CompletionOrder_GPONP',
              'http://openfiber.it/schemas/New_SF_OLO_Passivi/Response.xsd',
              'Response',
              'OF_GPONP_Res_Schema_CompletionOrderNew.Response_element'}
            );
            response_x = response_map_x.get('response_x');
            return response_x;
        }
    }
}