//Generated by wsdl2apex

public class OF_WS_OM_DeactivationOrderNew {
    public class PortTypeEndpoint4 {
        //public String endpoint_x = 'http://localhost:7000/New_SF_OM/DeactivationOrder';
        List<OF_Puntamento_Callout__c> listCustomSett =  OF_Puntamento_Callout__c.getAll().values();
    	String puntamento=listCustomSett[0].Tibco_Collaudo__c;
        public String endpoint_x = 'https://'+puntamento+'/New_SF_OM/DeactivationOrder';
        public Map<String,String> inputHttpHeaders_x;
        public Map<String,String> outputHttpHeaders_x;
        public String clientCertName_x;
        public String clientCert_x;
        public String clientCertPasswd_x;
        public Integer timeout_x;
        private String[] ns_map_type_info = new String[]{'http://xmlns.example.com/1541614413953', 'OF_WS_OM_DeactivationOrderNew', 'http://openfiber.it/schemas/New_SF_OM/Esito.xsd', 'OF_WS_OM_Schema_Res_DeactivationNew', 'http://openfiber.it/schemas/New_SF_OM/DeactivationOrder.xsd', 'OF_WS_OM_Schema_Req_DeactivationNew'};
        public OF_WS_OM_Schema_Res_DeactivationNew.Esito_element DeactivationOrder(List<EOF_EAI_Service_Log__c> listLog) { 
            //try{
            OF_WS_OM_Schema_Req_DeactivationNew.DeactivationOrder_Req_element request_x = new OF_WS_OM_Schema_Req_DeactivationNew.DeactivationOrder_Req_element();
            //('OSCRM OK');
            if(!OF_SA_GE_UtilsNew.checkRTMap){
                //vado a creare la mappa dei recordtype per poi utilizzarla
                OF_SA_GE_UtilsNew.RTMap = new  map<String,String>();
                for(recordtype rt : [select id,developername from recordtype]){
                    OF_SA_GE_UtilsNew.RTMap.put(rt.developername,rt.id);
                }
                OF_SA_GE_UtilsNew.checkRTMap=true;
            }  
            //AA campi nuovo wsdl 4 dicembre 2018    
            EOF_EAI_Service_Log__c slToUpdate = new EOF_EAI_Service_Log__c();
                for(EOF_EAI_Service_Log__c sl :listLog){  
                    if(sl.recordtypeId==OF_SA_GE_UtilsNew.rtMap.get('OF_SA_FiberRequest')){
                        slToUpdate = sl;
                        request_x.CODICE_OPERATORE=sl.EOF_CODICE_OPERATORE__c;
                        request_x.CODICE_ORDINE_OLO=sl.EOF_CODICE_ORDINE_OLO__c;
                        request_x.CODICE_ORDINE_OF=sl.EOF_CODICE_ORDINE_EOF__c;
                        request_x.DATA_NOTIFICA=OF_SA_GE_UtilsNew.DateToString(sl.EOF_DATA_NOTIFICA__c);
                        request_x.ID_NOTIFICA=sl.EOF_ID_NOTIFICA__c;
                        request_x.NOME_CLIENTE=sl.EOF_NOME_CLIENTE__c;
                        request_x.COGNOME_CLIENTE=sl.EOF_COGNOME_CLIENTE__c;
                        request_x.RECAPITO_TELEFONICO_CLIENTE_1=sl.EOF_RECAPITO_TELEFONICO_CLIENTE_1__c;
                        request_x.RECAPITO_TELEFONICO_CLIENTE_2=sl.EOF_RECAPITO_TELEFONICO_CLIENTE_2__c;
                        request_x.NOTE=sl.EOF_NOTE__c;
                        request_x.ID_RISORSA=sl.EOF_ID_RISORSA__c ;
                        request_x.TIPO_COMUNICAZIONE=sl.EOF_TIPO_COMUNICAZIONE__c ;
                        request_x.SORGENTE=sl.EOF_SORGENTE__c ;
                        request_x.SLA_DATE=sl.EOF_SLA_DATE__c ; 
                        request_x.Collegamento_P2P=sl.EOF_COLLEGAMENTO_P2P__c ;
                        request_x.TRACCIATO=sl.EOF_TRACCIATO__c ;
                        request_x.ID_SERVIZIO=sl.EOF_ID_SERVIZIO__c ;
                        request_x.PROFILO=sl.EOF_PROFILO__c ;
                        request_x.Provincia=sl.EOF_Provincia__c ;
                        request_x.Comune=sl.EOF_Comune__c;
                        request_x.Particella_Toponomastica=sl.EOF_Particella_Toponomastica__c ;
                        request_x.Indirizzo=sl.EOF_Indirizzo__c ; 
                        request_x.Numero_Civico=sl.EOF_Numero_Civico__c ; 
                        request_x.TIPOLOGIA_SERVIZIO=sl.EOF_TIPOLOGIA_SERVIZIO__c;
                        //AA 070219 - Aggiunti nuovi campi
                        request_x.TRACCIATO_TRASCODIFICATO = sl.TRACCIATO_TRASCODIFICATO__c;  
                        request_x.CODICE_OPERATORE_SECONDARIO = sl.OF_Codice_Operatore_Secondario__c;                          
                        //FINE AA 070219
                    } 
                }
                if(listLog.size()>1){
                    request_x.APPARATO = new List<OF_WS_OM_Schema_Req_DeactivationNew.APPARATO_element>();
                    
                    for(EOF_EAI_Service_Log__C sLog : listLog){
                        
                        if(sLog.recordtypeId==OF_SA_GE_UtilsNew.rtMap.get('OF_SA_Cpe')){
                            OF_WS_OM_Schema_Req_DeactivationNew.APPARATO_element app = new OF_WS_OM_Schema_Req_DeactivationNew.APPARATO_element();
                            app.TIPOLOGIA_APPARATO=sLog.EOF_TIPOLOGIA_APPARATO__C;
                            app.ID_APPARATO=sLog.OF_SA_ID_APPARATO__c;
                            request_x.APPARATO.add(app); 
                        }
                    } 
                }
                OF_WS_OM_Schema_Res_DeactivationNew.Esito_element response_x;
                Map<String, OF_WS_OM_Schema_Res_DeactivationNew.Esito_element> response_map_x = new Map<String, OF_WS_OM_Schema_Res_DeactivationNew.Esito_element>();
                response_map_x.put('response_x', response_x);
                WebServiceCallout.invoke(
                this,
                request_x,
                response_map_x,
                new String[]{endpoint_x,
                '/Business/Services/New_SF_OM/Resources/DeactivationOrder-service4.serviceagent/PortTypeEndpoint4/DeactivationOrder',
                'http://openfiber.it/schemas/New_SF_OM/DeactivationOrder.xsd',
                'DeactivationOrder_Req',
                'http://openfiber.it/schemas/New_SF_OM/Esito.xsd',
                'Esito',
                'OF_WS_OM_Schema_Res_DeactivationNew.Esito_element'}
                );
                response_x = response_map_x.get('response_x');
                return response_x;
            /*}catch(Exception e){
                OF_WS_OM_Schema_Res_DeactivationNew.Esito_element response_x = new OF_WS_OM_Schema_Res_DeactivationNew.Esito_element();
                    response_x.ESITO = '0';
                    response_x.MOTIVAZIONE = 'STUBBED ACK';
                return response_x;
            }*/
        }
    }
}